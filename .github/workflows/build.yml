name: 🧪 بناء الكيرنل Exynos990 مع KernelSU

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 🔰 تحميل ملفات المشروع من GitHub
        uses: actions/checkout@v4

      - name: 🛠️ تثبيت الأدوات والحزم الأساسية
        run: |
          sudo apt update
          sudo apt install -y git zip unzip curl wget bc bison flex build-essential \
            libssl-dev libncurses-dev clang python3 python3-pip gcc libc6-dev

      - name: 📦 تحميل boot.img الأصلي من GitHub Releases
        run: |
          mkdir -p boot-original
          wget --header="Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            -O boot-original/boot.zip \
            https://github.com/usama19931993/exynos990-kernel1/releases/download/v1/boot-original.zip
          unzip -o boot-original/boot.zip -d boot-original
          cp boot-original/boot.img kernel/