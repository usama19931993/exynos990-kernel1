name: Build Kernel

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸŸ¢ Ø¨Ø¯Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø³ÙƒØ±Ø¨Øª
        run: echo "âœ… Ø¨Ø¯Ø£ ØªÙ†ÙÙŠØ° Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø¨Ù†Ø§Ø¡..."

      - name: ğŸ”» ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø£ØµÙ„ÙŠ
        run: |
          mkdir -p boot-original
          wget --header="Authorization: token ${{ secrets.GH_TOKEN }}" \
            -O boot-original/boot.zip \
            https://github.com/usama19931993/exynos990-kernel1/releases/download/boot-original/boot-original.zip
          unzip -o boot-original/boot.zip -d boot-original
          cp boot-original/boot.img kernel/

      - name: ğŸ”§ Ø¯Ù…Ø¬ KernelSU Ù…Ø¹ Ø§Ù„ÙƒÙŠØ±Ù†Ù„
        run: |
          git clone --depth=1 -b main https://github.com/KernelSU/KernelSU kernel/kernelSU
          cd kernel
          KERNEL_SOURCE=$(pwd)
          KSU_DIR=$KERNEL_SOURCE/kernelSU
          bash $KSU_DIR/scripts/merge.sh $KERNEL_SOURCE